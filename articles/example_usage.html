<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Example Usage • RopenMeteo</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Example Usage">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RopenMeteo</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/example_usage.html">Example Usage</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/flare-forecast/RopenMeteo/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Example Usage</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/flare-forecast/RopenMeteo/blob/master/vignettes/example_usage.Rmd" class="external-link"><code>vignettes/example_usage.Rmd</code></a></small>
      <div class="d-none name"><code>example_usage.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://flare-forecast.org/RopenMeteo/">RopenMeteo</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="weather-forecasts">Weather forecasts<a class="anchor" aria-label="anchor" href="#weather-forecasts"></a>
</h2>
<p>The open-meteo project combines the the best models for each location
across the globe to provide the best possible forecast. open-meteo
defines this as <code>model = "generic"</code>.</p>
<p>[<a href="https://open-meteo.com/en/docs" class="external-link uri">https://open-meteo.com/en/docs</a>]</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_forecast.html">get_forecast</a></span><span class="op">(</span>latitude <span class="op">=</span> <span class="fl">37.30</span>,</span>
<span>                   longitude <span class="op">=</span> <span class="op">-</span><span class="fl">79.83</span>,</span>
<span>                   forecast_days <span class="op">=</span> <span class="fl">7</span>, </span>
<span>                   past_days <span class="op">=</span> <span class="fl">2</span>, </span>
<span>                   model <span class="op">=</span> <span class="st">"generic"</span>,</span>
<span>                   variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperature_2m"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 7</span></span></span>
<span><span class="co">#&gt;   datetime            reference_datetime  site_id   model_id variable prediction</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79… generic  tempera…       21.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2024-08-20 <span style="color: #949494;">01:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79… generic  tempera…       20.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2024-08-20 <span style="color: #949494;">02:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79… generic  tempera…       19.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2024-08-20 <span style="color: #949494;">03:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79… generic  tempera…       18.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2024-08-20 <span style="color: #949494;">04:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79… generic  tempera…       18.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2024-08-20 <span style="color: #949494;">05:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79… generic  tempera…       17.9</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: unit &lt;chr&gt;</span></span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">unit</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">prediction</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#F8766D"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">reference_datetime</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">variable</span>, scale <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_usage_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="ensemble-weather-forecasts">Ensemble Weather Forecasts<a class="anchor" aria-label="anchor" href="#ensemble-weather-forecasts"></a>
</h2>
<p>Ensemble forecasts from individual models are available.</p>
<p>[<a href="https://open-meteo.com/en/docs/ensemble-api" class="external-link uri">https://open-meteo.com/en/docs/ensemble-api</a>]</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ensemble_forecast.html">get_ensemble_forecast</a></span><span class="op">(</span></span>
<span>  latitude <span class="op">=</span> <span class="fl">37.30</span>,</span>
<span>  longitude <span class="op">=</span> <span class="op">-</span><span class="fl">79.83</span>,</span>
<span>  forecast_days <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  past_days <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"gfs_seamless"</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperature_2m"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">unit</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">prediction</span>, color <span class="op">=</span> <span class="va">ensemble</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">reference_datetime</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">variable</span>, scale <span class="op">=</span> <span class="st">"free"</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>Options for models and variables are at <a href="https://open-meteo.com/en/docs/ensemble-api" class="external-link uri">https://open-meteo.com/en/docs/ensemble-api</a></p>
<p>Note that <code>ecmwf_ifs04</code> does not include solar
radiation.</p>
<p>List of global model ids:</p>
<pre><code>icon_seamless, icon_global, gfs_seamless, gfs025, gfs05, ecmwf_ifs04, gem_global</code></pre>
<div class="section level3">
<h3 id="use-with-the-general-lake-model">Use with the General Lake Model<a class="anchor" aria-label="anchor" href="#use-with-the-general-lake-model"></a>
</h3>
<p>We have included functions that allow the output to be used with the
General Lake Model ([<a href="https://doi.org/10.5194/gmd-12-473-2019" class="external-link uri">https://doi.org/10.5194/gmd-12-473-2019</a>]). Since the
open-meteo models do not include longwave radiation, the package
provides a function to calculate it from the cloud cover and air
temperature.</p>
<p>GLM requires a set of variables that are provided</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ensemble_forecast.html">get_ensemble_forecast</a></span><span class="op">(</span></span>
<span>  latitude <span class="op">=</span> <span class="fl">37.30</span>,</span>
<span>  longitude <span class="op">=</span> <span class="op">-</span><span class="fl">79.83</span>,</span>
<span>  forecast_days <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  past_days <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"gfs_seamless"</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu">RopenMeteo</span><span class="fu">::</span><span class="fu"><a href="../reference/glm_variables.html">glm_variables</a></span><span class="op">(</span>product <span class="op">=</span> <span class="st">"ensemble_forecast"</span>, </span>
<span>                                        time_step <span class="op">=</span> <span class="st">"hourly"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">#&gt;   datetime            reference_datetime  site_id     model_id ensemble variable</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… 00       relativ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… 01       relativ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… 02       relativ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… 03       relativ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… 04       relativ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… 05       relativ…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: prediction &lt;dbl&gt;, unit &lt;chr&gt;</span></span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">unit</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">prediction</span>, color <span class="op">=</span> <span class="va">ensemble</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">reference_datetime</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">variable</span>, scale <span class="op">=</span> <span class="st">"free"</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_usage_files/figure-html/emsemble-plot-1.png" width="700"></p>
<p>The following converts to GLM format</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_longwave.html">add_longwave</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/write_glm_format.html">write_glm_format</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">path</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">path</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span>, pattern <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">216</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span>  (6): AirTemp, ShortWave, LongWave, RelHum, WindSpeed, Rain</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">dttm</span> (1): time</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 7</span></span></span>
<span><span class="co">#&gt;   time                AirTemp ShortWave LongWave RelHum WindSpeed  Rain</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2024-08-20 <span style="color: #949494;">00:00:00</span>    19.5         0     317.     70      3.55     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2024-08-20 <span style="color: #949494;">01:00:00</span>    18.1         0     307.     76      3.11     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2024-08-20 <span style="color: #949494;">02:00:00</span>    16.8         0     300.     81      2.76     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2024-08-20 <span style="color: #949494;">03:00:00</span>    15.7         0     294.     86      2.48     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2024-08-20 <span style="color: #949494;">04:00:00</span>    14.7         0     290.     89      2.27     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2024-08-20 <span style="color: #949494;">05:00:00</span>    13.9         0     285.     90      2.2      0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="converting-to-ecological-forecasting-initative-convention">Converting to Ecological Forecasting Initative convention<a class="anchor" aria-label="anchor" href="#converting-to-ecological-forecasting-initative-convention"></a>
</h3>
<p>The standard used in the NEON Ecological Forecasting Challenge is
slightly different from the standard in this package. It uses the column
<code>parameter</code> for ensemble because the Challenge standard
allows the flexibility to use parametric distributions (i.e., normal
distribution <code>mean</code> and <code>sd</code>) in the same standard
as a ensemble (or sample) forecast. The <code>family</code> column
defines the distribution (here <code>family</code> =
<code>ensemble</code>).</p>
<p>The EFI standard also follows CF-conventions so the variable names
are converted to be CF compliant.</p>
<p>The output from <code><a href="../reference/convert_to_efi_standard.html">RopenMeteo::convert_to_efi_standard()</a></code> is
the same as the output from <code>neon4cast::stage2()</code></p>
<p>Learn more about <code>neon4cast::stage2()</code> here: [<a href="https://projects.ecoforecast.org/neon4cast-docs/Shared-Forecast-Drivers.html" class="external-link uri">https://projects.ecoforecast.org/neon4cast-docs/Shared-Forecast-Drivers.html</a>]</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_longwave.html">add_longwave</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/convert_to_efi_standard.html">convert_to_efi_standard</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 53,568 × 8</span></span></span>
<span><span class="co">#&gt;    datetime            reference_datetime  site_id     model_id family parameter</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 01       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 01       </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 53,558 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: variable &lt;chr&gt;, prediction &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Note that <code>neon4cast::stage3()</code> is similar to</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_longwave.html">add_longwave</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/convert_to_efi_standard.html">convert_to_efi_standard</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">datetime</span> <span class="op">&lt;</span> <span class="va">reference_datetime</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11,904 × 8</span></span></span>
<span><span class="co">#&gt;    datetime            reference_datetime  site_id     model_id family parameter</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 00       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 01       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 gfs_sea… ensem… 01       </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11,894 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: variable &lt;chr&gt;, prediction &lt;dbl&gt;</span></span></span></code></pre></div>
<p>With the only difference that the number of days is equal to the
<code>past_days</code> in the call to
<code><a href="../reference/get_ensemble_forecast.html">RopenMeteo::get_ensemble_forecast()</a></code>. The max
<code>past_days</code> from open-meteo is ~60 days.</p>
</div>
</div>
<div class="section level2">
<h2 id="historical-weather">Historical Weather<a class="anchor" aria-label="anchor" href="#historical-weather"></a>
</h2>
<p>If you need more historical days for model calibration and testing,
historical data are available through open-meteo’s historical weather
API.</p>
<p>[<a href="https://open-meteo.com/en/docs/historical-weather-api" class="external-link uri">https://open-meteo.com/en/docs/historical-weather-api</a>]</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_historical_weather.html">get_historical_weather</a></span><span class="op">(</span></span>
<span>  latitude <span class="op">=</span> <span class="fl">37.30</span>,</span>
<span>  longitude <span class="op">=</span> <span class="op">-</span><span class="fl">79.83</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2023-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperature_2m"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">df</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   datetime            site_id     model_id variable       prediction unit </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2024-08-19 <span style="color: #949494;">19:00:00</span> 37.3_-79.83 ERA5     temperature_2m       25   °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2024-08-19 <span style="color: #949494;">20:00:00</span> 37.3_-79.83 ERA5     temperature_2m       24.3 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2024-08-19 <span style="color: #949494;">21:00:00</span> 37.3_-79.83 ERA5     temperature_2m       24.7 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2024-08-19 <span style="color: #949494;">22:00:00</span> 37.3_-79.83 ERA5     temperature_2m       23.3 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2024-08-19 <span style="color: #949494;">23:00:00</span> 37.3_-79.83 ERA5     temperature_2m       22.8 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2024-08-20 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 ERA5     temperature_2m       21.2 °C</span></span></code></pre></div>
<p>Notice the delay of ~7 days.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">unit</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">prediction</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#F8766D"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/with_tz.html" class="external-link">with_tz</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, tzone <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">variable</span>, scale <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 71 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_line()`).</span></span></code></pre></div>
<p><img src="example_usage_files/figure-html/hist-plot-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="seasonal-forecasts">Seasonal Forecasts<a class="anchor" aria-label="anchor" href="#seasonal-forecasts"></a>
</h2>
<p>Weather forecasts for up to 9 months in the future are available from
the NOAA Climate Forecasting System</p>
<p>[<a href="https://open-meteo.com/en/docs/seasonal-forecast-api" class="external-link uri">https://open-meteo.com/en/docs/seasonal-forecast-api</a>]</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_seasonal_forecast.html">get_seasonal_forecast</a></span><span class="op">(</span></span>
<span>  latitude <span class="op">=</span> <span class="fl">37.30</span>,</span>
<span>  longitude <span class="op">=</span> <span class="op">-</span><span class="fl">79.83</span>,</span>
<span>  forecast_days <span class="op">=</span> <span class="fl">274</span>,</span>
<span>  past_days <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperature_2m"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">#&gt;   datetime            reference_datetime  site_id     model_id ensemble variable</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2024-08-17 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 cfs      01       tempera…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2024-08-17 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 cfs      02       tempera…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2024-08-17 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 cfs      03       tempera…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2024-08-17 <span style="color: #949494;">00:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 cfs      04       tempera…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2024-08-17 <span style="color: #949494;">06:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 cfs      01       tempera…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2024-08-17 <span style="color: #949494;">06:00:00</span> 2024-08-22 <span style="color: #949494;">00:00:00</span> 37.3_-79.83 cfs      02       tempera…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: prediction &lt;dbl&gt;, unit &lt;chr&gt;</span></span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">unit</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">prediction</span>, color <span class="op">=</span> <span class="va">ensemble</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">reference_datetime</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">variable</span>, scale <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 2073 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_line()`).</span></span></code></pre></div>
<p><img src="example_usage_files/figure-html/seasonal-plot-1.png" width="700"></p>
<div class="section level3">
<h3 id="downscaling-from-6-hour-to-1-hour-time-step">Downscaling from 6 hour to 1 hour time-step<a class="anchor" aria-label="anchor" href="#downscaling-from-6-hour-to-1-hour-time-step"></a>
</h3>
<p>The downscaling uses the GLM variables</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_seasonal_forecast.html">get_seasonal_forecast</a></span><span class="op">(</span></span>
<span>  latitude <span class="op">=</span> <span class="fl">37.30</span>,</span>
<span>  longitude <span class="op">=</span> <span class="op">-</span><span class="fl">79.83</span>,</span>
<span>  forecast_days <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  past_days <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="../reference/glm_variables.html">glm_variables</a></span><span class="op">(</span>product <span class="op">=</span> <span class="st">"seasonal_forecast"</span>, </span>
<span>                            time_step <span class="op">=</span> <span class="st">"6hourly"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■            </span></span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/six_hourly_to_hourly.html">six_hourly_to_hourly</a></span><span class="op">(</span>latitude <span class="op">=</span> <span class="fl">37.30</span>, longitude <span class="op">=</span> <span class="op">-</span><span class="fl">79.83</span>, use_solar_geom <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">unit</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">prediction</span>, color <span class="op">=</span> <span class="va">ensemble</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">reference_datetime</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">variable</span>, scale <span class="op">=</span> <span class="st">"free"</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'quantmod':</span></span>
<span><span class="co">#&gt;   method            from</span></span>
<span><span class="co">#&gt;   as.zoo.data.frame zoo</span></span></code></pre></div>
<p><img src="example_usage_files/figure-html/downscale-plot-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="climate-projections">Climate Projections<a class="anchor" aria-label="anchor" href="#climate-projections"></a>
</h2>
<p>Climate projections from different models are available through 2050.
The output is a daily time-step.</p>
<p>Note the units for shortwave radiation are different for the climate
projection.</p>
<p>[<a href="https://open-meteo.com/en/docs/climate-api" class="external-link uri">https://open-meteo.com/en/docs/climate-api</a>]</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_climate_projections.html">get_climate_projections</a></span><span class="op">(</span></span>
<span>  latitude <span class="op">=</span> <span class="fl">37.30</span>,</span>
<span>  longitude <span class="op">=</span> <span class="op">-</span><span class="fl">79.83</span>,</span>
<span>  start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">years</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"EC_Earth3P_HR"</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperature_2m_mean"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   datetime   site_id     model_id      variable            prediction unit </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2024-08-22 37.3_-79.83 EC_Earth3P_HR temperature_2m_mean       21.7 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2024-08-23 37.3_-79.83 EC_Earth3P_HR temperature_2m_mean       22.3 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2024-08-24 37.3_-79.83 EC_Earth3P_HR temperature_2m_mean       21.9 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2024-08-25 37.3_-79.83 EC_Earth3P_HR temperature_2m_mean       20.6 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2024-08-26 37.3_-79.83 EC_Earth3P_HR temperature_2m_mean       19.5 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2024-08-27 37.3_-79.83 EC_Earth3P_HR temperature_2m_mean       20.3 °C</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">unit</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">prediction</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#F8766D"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">variable</span>, scale <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_usage_files/figure-html/climate-plot-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="downloading-multiple-sites-or-models">Downloading multiple sites or models<a class="anchor" aria-label="anchor" href="#downloading-multiple-sites-or-models"></a>
</h2>
<div class="section level3">
<h3 id="multiple-models">Multiple models<a class="anchor" aria-label="anchor" href="#multiple-models"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMCC_CM2_VHR4"</span>,<span class="st">"FGOALS_f3_H"</span>,<span class="st">"HiRAM_SIT_HR"</span>,<span class="st">"MRI_AGCM3_2_S"</span>,<span class="st">"EC_Earth3P_HR"</span>,<span class="st">"MPI_ESM1_2_XR"</span>,<span class="st">"NICAM16_8S"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_df</a></span><span class="op">(</span><span class="va">models</span>, <span class="kw">function</span><span class="op">(</span><span class="va">model</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/get_climate_projections.html">get_climate_projections</a></span><span class="op">(</span></span>
<span>    latitude <span class="op">=</span> <span class="fl">37.30</span>,</span>
<span>    longitude <span class="op">=</span> <span class="op">-</span><span class="fl">79.83</span>,</span>
<span>    start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">years</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>    model <span class="op">=</span> <span class="va">model</span>,</span>
<span>    variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperature_2m_mean"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■                   </span></span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■                </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■  </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■               </span></span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■             </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■              </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■               </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■                </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">unit</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">prediction</span>, color <span class="op">=</span> <span class="va">model_id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">variable</span>, scale <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_usage_files/figure-html/multi-climate-plot-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="multiple-sites">Multiple sites<a class="anchor" aria-label="anchor" href="#multiple-sites"></a>
</h3>
<p>The download of multiple sites uses the optional <code>site_id</code>
to add column that denotes the different sites.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sites</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>site_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fcre"</span>, <span class="st">"sunp"</span><span class="op">)</span>,</span>
<span>                latitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">37.30</span>, <span class="fl">43.39</span><span class="op">)</span>,</span>
<span>                longitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">79.83</span>, <span class="op">-</span><span class="fl">72.05</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_df</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">sites</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span>, <span class="va">sites</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/get_climate_projections.html">get_climate_projections</a></span><span class="op">(</span></span>
<span>    latitude <span class="op">=</span> <span class="va">sites</span><span class="op">$</span><span class="va">latitude</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>    longitude <span class="op">=</span> <span class="va">sites</span><span class="op">$</span><span class="va">longitude</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>    site_id <span class="op">=</span> <span class="va">sites</span><span class="op">$</span><span class="va">site_id</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>    start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">years</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>    model <span class="op">=</span> <span class="st">"MPI_ESM1_2_XR"</span>,</span>
<span>    variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperature_2m_mean"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span>,</span>
<span><span class="va">sites</span><span class="op">)</span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■                 </span></span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■               </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   datetime   site_id model_id      variable            prediction unit </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2024-08-22 fcre    MPI_ESM1_2_XR temperature_2m_mean       21.6 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2024-08-23 fcre    MPI_ESM1_2_XR temperature_2m_mean       20.7 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2024-08-24 fcre    MPI_ESM1_2_XR temperature_2m_mean       21.3 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2024-08-25 fcre    MPI_ESM1_2_XR temperature_2m_mean       18.9 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2024-08-26 fcre    MPI_ESM1_2_XR temperature_2m_mean       17.6 °C   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2024-08-27 fcre    MPI_ESM1_2_XR temperature_2m_mean       17.9 °C</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">unit</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">prediction</span>, color <span class="op">=</span> <span class="va">site_id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">variable</span>, scale <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_usage_files/figure-html/multi-site-plot-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="converting-from-daily-to-hourly-time-step">Converting from daily to hourly time-step<a class="anchor" aria-label="anchor" href="#converting-from-daily-to-hourly-time-step"></a>
</h3>
<p>Photosynthesis is non-linearly sensitive to shortwave radiation.
Therefore, the photosynthesis response to hourly radiation is different
than the response to the aggregated daily mean radiation. To address
this issue, we provide a function to convert the daily sum of shortwave
radiation to hourly values that uses solar geometry to impute.
Additionally, the sum of precipitation is divided by 24 hours to convert
to an hourly time-step. All other variables have their daily mean
applied to each hour.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_climate_projections.html">get_climate_projections</a></span><span class="op">(</span></span>
<span>  latitude <span class="op">=</span> <span class="fl">37.30</span>,</span>
<span>  longitude <span class="op">=</span> <span class="op">-</span><span class="fl">79.83</span>,</span>
<span>  start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">years</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"EC_Earth3P_HR"</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="../reference/glm_variables.html">glm_variables</a></span><span class="op">(</span>product <span class="op">=</span> <span class="st">"climate_projection"</span>, time_step <span class="op">=</span> <span class="st">"daily"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■               </span></span></span>
<span><span class="co">#&gt; Waiting 5s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■             </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■              </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■               </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■               </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■                          </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■                </span></span></span>
<span><span class="co">#&gt; Waiting 6s for throttling delay <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span></span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/daily_to_hourly.html">daily_to_hourly</a></span><span class="op">(</span>latitude <span class="op">=</span> <span class="fl">37.30</span>, longitude <span class="op">=</span> <span class="op">-</span><span class="fl">79.83</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">unit</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">prediction</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#F8766D"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">variable</span>, scale <span class="op">=</span> <span class="st">"free"</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_usage_files/figure-html/daily-to-hourly-plot-1.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Quinn Thomas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
